---
---
:ruby
  # may be set by partials
  #@config[:include_disqus_js] = false

  def keywords
    if is_front_page?
      tag_set.join(', ') 
    else
      tags = @item[:tags].nil? ? '' : @item[:tags].join(', ') 
      keywords = @item[:keywords] || ''
      [keywords, tags].join(', ')
    end
  end
  def link_unless_current(s)
    "<li><a href='/#{s}.html'>#{s}</a></li>" if @item.identifier != "/#{s}/" 
  end
  def logo
    if is_front_page?
      site_name
    else
      "<a href='/'>&laquo; #{site_name}</a>"
    end
  end

!!! Strict
%html
  %head
    %title= "#{@item[:title]}"
    %meta(content="text/html; charset=utf-8" http-equiv="Content-Type")
    %meta(name="keywords" content="#{keywords}")
    %meta(name="description" content="#{@item[:excerpt]}")
    %link(href="/static/css/stylesheet.css" rel="stylesheet" type="text/css")
    %script(src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript")
    %script(src="/static/js/scripts.js" type="text/javascript")
    = render('_ganalytics')

  %body(style="padding-top: 60px;" onload="prettyPrint(); Shadowbox.init();")
    -# needed since some content render <pre> blocks
    - content = find_and_preserve(yield)
    %div.topbar
      %div.topbar-inner
        %div.container-fluid
          %a.brand(href="/") Hasnain Lakhani's Website
          %ul.nav
            %li
              %a(href="/") Home
            %li.active
              %a(href="/blog/") Blog
              
    %div.container-fluid
      %div.sidebar
        %div.well
          %h5
            %a(href="/blog/") Blog Home
          %h5
            %a(href="/blog/archives/") Archives
          %h5
            %a(href="/blog/atom.xml") RSS Feed
          %h5 
            %a(href="/blog/tags/") Tags
          %ul
            - tags = count_tags()
            - tags.each.sort_by {|k,v| k}.each do |tag_count|
              - tag = tag_count[0]
              %li
                %a(href="/blog/tags/#{tag}/" class='tag')= tag

      %div.row
        %div.span16
          - if @item[:kind] == 'article'
            = render('_article', :item => @item, :content => content)
            %h5
              Related Articles
            = render('_other_articles_nav', :reference_item => @item)
            .clear
            - if disqus_shortname && !is_front_page?
              = render('_disqus', :item => @item)
          - else
            = content
          .clear

    %footer
      %p &copy; Muhammad Hasnain Lakhani 2011
